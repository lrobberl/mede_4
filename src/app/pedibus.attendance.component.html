<main-nav>
  <mat-card style="text-align: center" content="align: center">
    <mat-card-title>
      <h3> Fermate Pedibus - PRESENZE </h3>
    </mat-card-title>

    <mat-card-subtitle style="text-align: center" >
      <h3> {{ (data$ | async)?.date | date:'dd-MM-yyyy'}} </h3>
    </mat-card-subtitle>

    <mat-radio-group aria-label="Seleziona una linea">
      <mat-radio-button *ngFor="let linea of (linee$ | async)" (change)="getCorsa(linea.Nome, selectedDate)">{{linea.Nome}} &nbsp;&nbsp;</mat-radio-button>
    </mat-radio-group>

    <mat-tab-group dynamicHeight>
      <mat-tab label="Andata">
          <mat-card-content style="text-align: center">
            <mat-list>
              <mat-list-item *ngFor="let fermata of (data$ | async)?.corse[0].fermate">
                <mat-icon>trip_origin</mat-icon>
                <span class="highlight">{{fermata.orario}}&nbsp;&nbsp;{{fermata.nome}} &nbsp;&nbsp;&nbsp;&nbsp;</span>
                <span *ngFor="let persona of fermata.bambini; last as isLast"
                      (click)="segnaPresente($event, persona)">
          <span [class.selected] = persona.presente>{{persona.nome}}<span *ngIf="!isLast">,&nbsp;</span></span>
          </span>
              </mat-list-item>
            </mat-list>
          </mat-card-content>

      </mat-tab>
      <mat-tab label="Ritorno">
        <div class="example-large-box mat-elevation-z4">
          <mat-card-content style="text-align: center">
            <mat-list>
              <mat-list-item *ngFor="let fermata of (data$ | async)?.corse[1].fermate">
                <mat-icon>trip_origin</mat-icon>
                <span class="highlight">{{fermata.orario}}&nbsp;&nbsp;{{fermata.nome}} &nbsp;&nbsp;&nbsp;&nbsp;</span>
                <span *ngFor="let persona of fermata.bambini; last as isLast"
                      (click)="segnaPresente($event, persona)">
          <span [class.selected] = persona.presente>{{persona.nome}}<span *ngIf="!isLast">,&nbsp;</span></span>
          </span>
              </mat-list-item>
            </mat-list>
          </mat-card-content>

        </div>
      </mat-tab>
    </mat-tab-group>

  </mat-card>
</main-nav>
